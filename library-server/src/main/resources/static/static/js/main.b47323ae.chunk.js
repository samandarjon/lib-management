(this["webpackJsonplibrary-react"]=this["webpackJsonplibrary-react"]||[]).push([[0],{59:function(e,t,n){},60:function(e,t,n){},83:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),s=n.n(a),c=n(21),o=n.n(c),i=(n(59),n(60),n(26)),l=n(7),d=n(11),u=n(8),b=n(3),j=n(4),h=n(6),m=n(5),p=n(9),O=n.n(p),f=function(e){e?O.a.defaults.headers.common.Authorization=e:delete O.a.defaults.headers.common.Authorization},v="GET_ERRORS",x="GET_BOOKS",g="GET_BOOK",y="GET_RENT",N="GET_RENTS",k="DELETE_RENT",w="SET_CURRENT_USER",C=function(e){return{type:w,payload:e}},R=function(){return function(e){localStorage.removeItem("jwtToken"),f(!1),e(C({}))}},T=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).logout=function(){e.props.logout(),window.location.href="/"},e.signUpChecking=function(e){var t=e.user;return e.validToken?"ROLE_USER"===t.role[0].roleName?Object(r.jsxs)(d.b,{className:"nav-link",to:"/user/".concat(t.username),children:[Object(r.jsx)("i",{className:"fas fa-user-circle mr-1"}),"My books"]}):Object(r.jsx)(d.b,{className:"nav-link",to:"/admin",children:"Rental management"}):Object(r.jsx)(d.b,{className:"nav-link ",to:"/register",children:"Sign Up"})},e.signInChecking=function(t){return t.validToken?Object(r.jsx)(d.b,{className:"nav-link bg-red",onClick:e.logout,to:"logout",children:"Logout"}):Object(r.jsx)(d.b,{className:"nav-link",to:"/login",children:"Login"})},e}return Object(j.a)(n,[{key:"render",value:function(){return Object(r.jsx)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-primary mb-4",children:Object(r.jsxs)("div",{className:"container col-7",children:[Object(r.jsx)(d.b,{className:"navbar-brand bold",to:"/",children:"LIBRARY"}),Object(r.jsx)("div",{className:"collapse navbar-collapse",children:Object(r.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(r.jsx)("li",{className:"nav-item",children:this.signUpChecking(this.props.security)}),Object(r.jsx)("li",{className:"nav-item",children:this.signInChecking(this.props.security)})]})})]})})}}]),n}(a.Component),S=Object(l.b)((function(e){return{security:e.security}}),{logout:R})(T);var E=function(){return Object(r.jsxs)("footer",{className:"page-footer font-small pt-4",children:[Object(r.jsx)("div",{className:"container mb-1 pb-0",children:Object(r.jsxs)("ul",{className:"list-unstyled list-inline text-center",children:[Object(r.jsx)("li",{className:"list-inline-item",children:Object(r.jsx)("a",{className:"btn-floating btn-dribbble mx-1",href:" https://telegram.me/bahodirmarupov",children:Object(r.jsx)("i",{className:"fab fa-telegram"})})}),Object(r.jsx)("li",{className:"list-inline-item",children:Object(r.jsx)("a",{className:"btn-floating btn-fb mx-1",href:"https://www.facebook.com/bahodir.marupov.7",children:Object(r.jsx)("i",{className:"fab fa-facebook-f",children:" "})})}),Object(r.jsx)("li",{className:"list-inline-item",children:Object(r.jsx)("a",{className:"btn-floating btn-gplus mx-1",href:"https://github.com/BahodirMarupov",children:Object(r.jsx)("i",{className:"fab fa-github"})})}),Object(r.jsx)("li",{className:"list-inline-item",children:Object(r.jsx)("a",{className:"btn-floating btn-li mx-1",href:"https://www.linkedin.com/in/bahodir-marupov/",children:Object(r.jsx)("i",{className:"fab fa-linkedin-in",children:" "})})})]})}),Object(r.jsx)("div",{className:"footer-copyright text-center py-3",children:"\xa9 2020 Bahodir Marupov"})]})},D=n(19),A=n(46),B=n(12),_={books:{},book:{}},P={},I={rents:[],rent:{}},Y={user:{},validToken:!1},U=Object(D.c)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return t.payload;default:return e}},rents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case N:return Object(B.a)(Object(B.a)({},e),{},{rents:r});case y:return Object(B.a)(Object(B.a)({},e),{},{rent:r});case k:return Object(B.a)(Object(B.a)({},e),{},{rents:e.rents.filter((function(e){return e.id!==r}))});default:return e}},books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case x:return Object(B.a)(Object(B.a)({},e),{},{books:r});case g:return Object(B.a)(Object(B.a)({},e),{},{book:r});default:return e}},security:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case w:return Object(B.a)(Object(B.a)({},e),{},{user:r,validToken:!!r});default:return e}}}),F={},M=[A.a],L=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),W=window.navigator.userAgent.includes("Chrome")&&L?Object(D.e)(U,F,Object(D.d)(D.a.apply(void 0,M),L)):Object(D.e)(U,F,Object(D.d)(D.a.apply(void 0,M))),q=n(22),G=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).onChange=function(t){e.setState(Object(q.a)({},t.target.name,t.target.value))},e.onSubmit=function(t){t.preventDefault();var n={username:e.state.email,password:e.state.password};e.props.login(n,e.props.history)},e.getError=function(e){if(e)return Object(r.jsx)("div",{className:"pb-3 pt-3",children:Object(r.jsx)("div",{className:"alert alert-danger text-center w-50 m-auto",role:"alert",children:e})})},e.state={errors:{},email:"",password:""},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.security.validToken&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.security.validToken&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"login",children:Object(r.jsx)("div",{className:"container ",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-md-6 m-auto pb-5",children:[Object(r.jsx)("h1",{className:"display-4 text-center",children:"Log In"}),this.getError(this.state.errors.invalid),Object(r.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("input",{type:"text",className:"".concat(this.state.errors.username&&""===this.state.email?"form-control form-control-lg is-invalid":"form-control form-control-lg"),placeholder:"Username",name:"email",value:this.state.email,onChange:this.onChange}),Object(r.jsx)("div",{className:"invalid-feedback",children:this.state.errors.username})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("input",{type:"password",className:"".concat(this.state.errors.password&&""===this.state.password?"form-control form-control-lg is-invalid":"form-control form-control-lg"),placeholder:"Password",name:"password",value:this.state.password,onChange:this.onChange}),Object(r.jsx)("div",{className:"invalid-feedback",children:this.state.errors.password})]}),Object(r.jsx)("input",{type:"submit",className:"btn btn-info btn-block mt-4"})]}),Object(r.jsxs)("div",{className:"text-center mt-4",children:["Not registered? ",Object(r.jsx)(d.b,{className:"btn btn-outline-primary",to:"/register",children:"Register"})]})]})})})})}}]),n}(a.Component),X=Object(l.b)((function(e){return{errors:e.errors,security:e.security}}),{login:function(e,t){return function(n){O.a.post("/api/auth/login",e).then((function(e){var r=e.data,a=r.token,s=r.type;localStorage.setItem("jwtToken",s+a),f(s+a);var c=Object(i.a)(a);n(C(c)),t.push("/")})).catch((function(e){return n({type:v,payload:e.response.data})}))}}})(G),V=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).onSubmit=function(t){t.preventDefault();var n={username:e.state.username,password:e.state.password,prePassword:e.state.confirmPassword};e.props.createNewUser(n,e.props.history)},e.onChange=function(t){e.setState(Object(q.a)({},t.target.name,t.target.value))},e.state={errors:{},username:"",password:"",confirmPassword:""},e}return Object(j.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"register",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-md-6 m-auto pb-5 ",children:[Object(r.jsx)("h1",{className:"display-4 text-center",children:"Sign Up"}),Object(r.jsx)("p",{className:"lead text-center",children:"Create your Account"}),Object(r.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("input",{type:"text",className:"".concat(this.state.errors.username?"form-control form-control-lg is-invalid":"form-control form-control-lg"),placeholder:"Username",name:"username",value:this.state.username,onChange:this.onChange}),Object(r.jsx)("div",{className:"invalid-feedback",children:this.state.errors.username})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("input",{type:"password",className:"".concat(this.state.errors.password&&""===this.state.password||this.state.errors.password&&this.state.password.length<6?"form-control form-control-lg is-invalid":"form-control form-control-lg"),placeholder:"Password",name:"password",value:this.state.password,onChange:this.onChange}),Object(r.jsx)("div",{className:"invalid-feedback",children:this.state.errors.password})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("input",{type:"password",className:"".concat(this.state.errors.prePassword&&this.state.password!==this.state.confirmPassword?"form-control form-control-lg is-invalid":"form-control form-control-lg"),placeholder:"Confirm Password",name:"confirmPassword",value:this.state.confirmPassword,onChange:this.onChange}),Object(r.jsx)("div",{className:"invalid-feedback",children:this.state.errors.prePassword})]}),Object(r.jsx)("input",{type:"submit",className:"btn btn-info btn-block mt-4"})]})]})})})})}}]),n}(a.Component),z=Object(l.b)((function(e){return{errors:e.errors}}),{createNewUser:function(e,t){return function(n){O.a.post("/api/auth/register",e).then((function(e){var r=e.data,a=r.token,s=r.type;localStorage.setItem("jwtToken",s+a),f(s+a);var c=Object(i.a)(a);console.log(c),n(C(c)),t.push("/")})).catch((function(e){n({type:v,payload:e.response.data})}))}}})(V),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){O.a.get("/api/book?page="+e).then((function(e){t({type:x,payload:e.data})})).catch((function(e){console.log(e)}))}},K=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},H=n(13),Q=n.n(H),Z=function(){return function(e){O.a.get("/api/rent/myBooks").then((function(t){e({type:N,payload:t.data})})).catch((function(e){console.log(e)}))}},$=function(){return function(e){O.a.get("/api/rent").then((function(t){e({type:N,payload:t.data})})).catch((function(e){console.log(e)}))}},ee=(n(83),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).getRentButton=function(t,n,a,s,c){return c>0?n?"ROLE_USER"===a.role[0].roleName?t?Object(r.jsx)("div",{type:"button",className:"btn btn-primary mx-2 disabled",children:"Rented"}):Object(r.jsx)("button",{type:"button",onClick:function(){return e.props.setRent(s)},className:"btn btn-primary mx-2",children:"Rent"}):"":Object(r.jsx)(d.b,{to:"/login",className:"btn btn-primary mx-2",children:"Rent"}):""},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.book,n=e.isRent,a=e.user,s=e.validToken;return Object(r.jsx)("div",{className:"col-sm-3 mb-2",children:Object(r.jsxs)("div",{className:"card ",children:[Object(r.jsx)("img",{className:"card-img-top img-fluid img-file-style",src:"https://liam-library-management-system.herokuapp.com/api/img/download/"+t.attachmentId,alt:"picture"}),Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h5",{className:"card-title",children:t.name}),Object(r.jsxs)("p",{className:"card-text",children:["Written by ",t.author]}),Object(r.jsxs)("p",{className:"card-text",children:["(",t.writtenYear,")"]}),Object(r.jsxs)("p",{className:"card-text",children:[" ",t.amount," left in library"]}),Object(r.jsx)(d.b,{to:"/book/"+t.id,className:"btn btn-success mx-2",children:"View"}),this.getRentButton(n,s,a,t.id,t.amount)]})]})})}}]),n}(a.Component));ee.propTpes={setRent:Q.a.func.isRequired};var te=Object(l.b)((function(e){return{}}),{setRent:function(e){return function(t){O.a.post("/api/rent/"+e).then((function(){t(J()),t(Z())})).catch((function(e){console.log(e)}))}}})(ee),ne=n(101),re=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.books,a=t.rents,s=t.onChange,c=t.validToken,o=t.user;return n.content&&n.content.length>0&&(e=n.content.map((function(e){return a.length>0&&a.filter((function(t){return t.bookDto.id===e.id})).length>0?Object(r.jsx)(te,{book:e,isRent:!0,validToken:c,user:o}):Object(r.jsx)(te,{book:e,isRent:!1,validToken:c,user:o})}))),Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)("div",{className:"row",children:e}),Object(r.jsx)(ne.a,{count:n.totalPages,onChange:s})]})}}]),n}(a.Component),ae=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t,n){e.props.getAllBooks(n-1)},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.getAllBooks(0),this.props.security.validToken&&this.props.getRents()}},{key:"render",value:function(){var e,t=this.props.books,n=this.props.rents,a=this.props.security,s=a.user,c=a.validToken;return K(t)||(e=Object(r.jsx)(re,{books:t,rents:n,user:s,validToken:c,onChange:this.onChange.bind(this)})),Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md",children:e})})})}}]),n}(a.Component),se=Object(l.b)((function(e){return{books:e.books.books,rents:e.rents.rents,security:e.security}}),{getAllBooks:J,getRents:Z})(ae),ce=n(50),oe=Object(l.b)((function(e){return{security:e.security}}))((function(e){var t=e.component,n=e.security,a=Object(ce.a)(e,["component","security"]);return Object(r.jsx)(u.b,Object(B.a)(Object(B.a)({},a),{},{render:function(e){return!0===n.validToken?Object(r.jsx)(t,Object(B.a)({},e)):Object(r.jsx)(u.a,{to:"/login"})}}))})),ie=n(31),le=n.n(ie),de=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"removeRent",value:function(e){this.props.deleteRent(e)}},{key:"render",value:function(){var e=this,t=this.props.rent;return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:t.bookDto.name}),Object(r.jsx)("td",{children:t.bookDto.author}),Object(r.jsx)("td",{children:t.bookDto.writtenYear}),Object(r.jsx)("td",{children:Object(r.jsx)(le.a,{format:"YYYY/MM/DD",children:t.createdAt})}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{className:"btn btn-danger",type:"button",onClick:function(n){return e.removeRent(t.id)},children:"give back"})})]})}}]),n}(a.Component),ue=Object(l.b)(null,{deleteRent:function(e){return function(t){O.a.delete("/api/rent/"+e).then((function(){t(Z())})).catch((function(e){console.log(e)}))}}})(de),be=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.username,t=this.props.security,n=t.user;t.validToken&&(console.log(typeof e,n.username===e,typeof n.username),n.username!==e?this.props.history.push("/notFound"):this.props.getRents())}},{key:"render",value:function(){var e,t=this.props.rents.rents;return K(t)||(e=t.map((function(e){return Object(r.jsx)(ue,{rent:e})}))),Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md",children:Object(r.jsxs)("table",{className:"table table-hover",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"col",children:"Name"}),Object(r.jsx)("th",{scope:"col",children:"Author"}),Object(r.jsx)("th",{scope:"col",children:"writter year"}),Object(r.jsx)("th",{scope:"col",children:"rented time"}),Object(r.jsx)("th",{scope:"col"})]})}),Object(r.jsx)("tbody",{children:e})]})})})})}}]),n}(a.Component),je=Object(l.b)((function(e){return{rents:e.rents,security:e.security}}),{getRents:Z})(be),he=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.getBook(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.book;return Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-4",children:Object(r.jsx)("img",{className:"card-img-top img-fluid mr-3 mb-3",src:"https://liam-library-management-system.herokuapp.com/api/img/download/"+e.attachmentId,alt:"picture"})}),Object(r.jsxs)("div",{className:"col-8",children:[Object(r.jsx)("h3",{className:"text-center",children:e.name}),Object(r.jsxs)("p",{className:"bold text-center",children:["Written by ",e.author," in ",e.writtenYear]}),Object(r.jsxs)("p",{children:["   ",e.description]})]})]})})}}]),n}(a.Component),me=Object(l.b)((function(e){return{book:e.books.book}}),{getBook:function(e){return function(t){O.a.get("/api/book/"+e).then((function(e){t({type:g,payload:e.data})})).catch((function(e){console.log(e)}))}}})(he),pe=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{children:"Not Found"})}}]),n}(a.Component),Oe=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).state={rents:[]},e}return Object(j.a)(n,[{key:"removeRent",value:function(e){this.props.deleteRentAdmin(e)}},{key:"componentDidMount",value:function(){this.props.getRentsForAdmin()}},{key:"componentWillReceiveProps",value:function(e){this.setState({rents:e.rents})}},{key:"render",value:function(){var e,t=this,n=this.state.rents;return K(n)||(e=n.map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.user.username}),Object(r.jsx)("td",{children:e.bookDto.name}),Object(r.jsx)("td",{children:e.bookDto.author}),Object(r.jsx)("td",{children:e.bookDto.writtenYear}),Object(r.jsx)("td",{children:Object(r.jsx)(le.a,{format:"YYYY/MM/DD",children:e.createdAt})}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{className:"btn btn-danger",type:"button",onClick:function(n){return t.removeRent(e.id)},children:"Take back"})})]})}))),Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-md",children:[Object(r.jsx)(d.b,{to:"/add-book",className:"btn btn-info",children:"Add Book"}),Object(r.jsx)("h1",{className:"text-center",children:"User Rents"}),Object(r.jsxs)("table",{className:"table table-hover text-center",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"col",children:"User"}),Object(r.jsx)("th",{scope:"col",children:"Book name"}),Object(r.jsx)("th",{scope:"col",children:"Book Author"}),Object(r.jsx)("th",{scope:"col",children:"Written year"}),Object(r.jsx)("th",{scope:"col",children:"Rented time"}),Object(r.jsx)("th",{scope:"col"})]})}),Object(r.jsx)("tbody",{children:e})]})]})})})}}]),n}(a.Component),fe=Object(l.b)((function(e){return{rents:e.rents.rents}}),{getRentsForAdmin:$,deleteRentAdmin:function(e){return function(t){O.a.delete("/api/rent/"+e).then((function(){t($())})).catch((function(e){console.log(e)}))}}})(Oe),ve=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).onSubmit=function(t){console.log("onsubmit"),t.preventDefault();var n={name:e.state.name,author:e.state.author,description:e.state.description,writtenYear:e.state.writtenYear,amount:e.state.amount,attachmentId:e.state.attachmentId};e.props.saveBook(n,e.state.file,e.props.history)},e.onChange=function(t){e.setState(Object(q.a)({},t.target.name,t.target.value))},e.onFileChange=function(t){e.setState({file:t.target.files[0]})},e.state={name:"",author:"",description:"",writtenYear:"",amount:1,attachmentId:"",file:{},errors:{}},e}return Object(j.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){return Object(r.jsx)("div",{children:Object(r.jsx)("div",{className:"add-PBI",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-md-6 m-auto",children:[Object(r.jsx)(d.b,{to:"/admin",className:"btn btn-light",children:"Go back"}),Object(r.jsx)("h4",{className:"display-4 text-center",children:"Add book"}),Object(r.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("input",{required:!0,type:"text",className:"".concat(this.state.errors.name&&""===this.state.name?"form-control form-control-lg is-invalid":"form-control form-control-lg"),name:"name",placeholder:"Book name",value:this.state.name,onChange:this.onChange}),Object(r.jsx)("div",{className:"invalid-feedback",children:this.state.errors.name})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("input",{required:!0,type:"text",className:"".concat(this.state.errors.author&&""===this.state.author?"form-control form-control-lg is-invalid":"form-control form-control-lg"),name:"author",placeholder:"Author",value:this.state.author,onChange:this.onChange}),Object(r.jsx)("div",{className:"invalid-feedback",children:this.state.errors.author})]}),Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)("textarea",{required:!0,className:"form-control form-control-lg",placeholder:"Description",name:"description",value:this.state.description,onChange:this.onChange})}),Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)("input",{required:!0,type:"date",className:"form-control form-control-lg",name:"writtenYear",value:this.state.writtenYear,onChange:this.onChange})}),Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)("input",{required:!0,type:"number",min:"1",className:"form-control form-control-lg",name:"amount",placeholder:"Amount",value:this.state.amount,onChange:this.onChange})}),Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)("input",{type:"file",name:"file",onChange:this.onFileChange})}),Object(r.jsx)("input",{type:"submit",className:"btn btn-primary btn-block mt-4"})]})]})})})})})}}]),n}(a.Component),xe=Object(l.b)((function(e){return{errors:e.errors}}),{saveBook:function(e,t,n){return function(r){if(t instanceof File){var a=new FormData;a.append("file",t),O.a.post("/api/img/upload",a).then((function(t){e.attachmentId=t.data[0],console.log(e),O.a.post("/api/book",e).then((function(){r({type:v,payload:{}}),n.push("/admin")})).catch((function(e){r({type:v,payload:e.response.data})}))})).catch((function(e){n.push("/wrong"),console.log(e)}))}}}})(ve),ge=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{children:Object(r.jsx)("h1",{className:"event-danger text-center",children:"Something is wrong!!"})})}}]),n}(a.Component),ye=localStorage.jwtToken;if(ye){f(ye);var Ne=Object(i.a)(ye);W.dispatch({type:w,payload:Ne}),Date.now()/1e3>Ne.exp&&(W.dispatch(R()),window.location.href="/")}var ke=function(){return Object(r.jsx)(l.a,{store:W,children:Object(r.jsx)(d.a,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(S,{}),Object(r.jsx)(u.b,{exact:!0,path:"/",component:se}),Object(r.jsx)(u.b,{exact:!0,path:"/login",component:X}),Object(r.jsx)(u.b,{exact:!0,path:"/register",component:z}),Object(r.jsx)(u.b,{exact:!0,path:"/add-book",component:xe}),Object(r.jsx)(u.b,{exact:!0,path:"/book/:id",component:me}),Object(r.jsx)(u.b,{exact:!0,path:"/notFound",component:pe}),Object(r.jsx)(u.b,{exact:!0,path:"/wrong",component:ge}),Object(r.jsx)(u.d,{children:Object(r.jsx)(oe,{exact:!0,path:"/user/:username",component:je})}),Object(r.jsx)(u.d,{children:Object(r.jsx)(oe,{exact:!0,path:"/admin",component:fe})}),Object(r.jsx)(E,{})]})})})},we=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,102)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};o.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(ke,{})}),document.getElementById("root")),we()}},[[86,1,2]]]);
//# sourceMappingURL=main.b47323ae.chunk.js.map